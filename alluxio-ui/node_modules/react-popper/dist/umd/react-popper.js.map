{"version":3,"file":"react-popper.js","sources":["../../src/Manager.js","../../src/Target.js","../../src/Popper.js","../../src/Arrow.js"],"sourcesContent":["import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Manager extends Component {\n  static childContextTypes = {\n    popperManager: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    tag: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  }\n\n  static defaultProps = {\n    tag: 'div',\n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this._setTargetNode,\n        getTargetNode: this._getTargetNode,\n      },\n    }\n  }\n\n  _setTargetNode = node => {\n    this._targetNode = node\n  }\n\n  _getTargetNode = () => {\n    return this._targetNode\n  }\n\n  render() {\n    const { tag, children, ...restProps } = this.props\n    if (tag !== false) {\n      return createElement(tag, restProps, children)\n    } else {\n      return children\n    }\n  }\n}\n\nexport default Manager\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Target = (props, context) => {\n  const { component = 'div', innerRef, children, ...restProps } = props\n  const { popperManager } = context\n  const targetRef = node => {\n    popperManager.setTargetNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n\n  if (typeof children === 'function') {\n    const targetProps = { ref: targetRef }\n    return children({ targetProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef\n  } else {\n    componentProps.innerRef = targetRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nTarget.contextTypes = {\n  popperManager: PropTypes.object.isRequired,\n}\n\nTarget.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Target\n","import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\nimport PopperJS from 'popper.js'\n\nexport const placements = PopperJS.placements\n\nclass Popper extends Component {\n  static contextTypes = {\n    popperManager: PropTypes.object,\n  }\n\n  static childContextTypes = {\n    popper: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    innerRef: PropTypes.func,\n    placement: PropTypes.oneOf(placements),\n    eventsEnabled: PropTypes.bool,\n    positionFixed: PropTypes.bool,\n    modifiers: PropTypes.object,\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    target: PropTypes.oneOfType([\n      // the following check is needed for SSR\n      PropTypes.instanceOf(typeof Element !== 'undefined' ? Element : Object),\n      PropTypes.shape({\n        getBoundingClientRect: PropTypes.func.isRequired,\n        clientWidth: PropTypes.number.isRequired,\n        clientHeight: PropTypes.number.isRequired,\n      }),\n    ]),\n  }\n\n  static defaultProps = {\n    component: 'div',\n    placement: 'bottom',\n    eventsEnabled: true,\n    positionFixed: false,\n    modifiers: {},\n  }\n\n  state = {}\n\n  getChildContext() {\n    return {\n      popper: {\n        setArrowNode: this._setArrowNode,\n        getArrowStyle: this._getArrowStyle,\n      },\n    }\n  }\n\n  componentDidUpdate(lastProps) {\n    if (\n      lastProps.placement !== this.props.placement ||\n      lastProps.eventsEnabled !== this.props.eventsEnabled ||\n      lastProps.target !== this.props.target\n    ) {\n      this._destroyPopper()\n      this._createPopper()\n    }\n    if (lastProps.children !== this.props.children) {\n      this._scheduleUpdate()\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopper()\n  }\n\n  _setArrowNode = node => {\n    this._arrowNode = node\n  }\n\n  _getTargetNode = () => {\n    if (this.props.target) {\n      return this.props.target\n    } else if (\n      !this.context.popperManager ||\n      !this.context.popperManager.getTargetNode()\n    ) {\n      throw new Error(\n        'Target missing. Popper must be given a target from the Popper Manager, or as a prop.',\n      )\n    }\n    return this.context.popperManager.getTargetNode()\n  }\n\n  _getOffsets = data => {\n    return Object.keys(data.offsets).map(key => data.offsets[key])\n  }\n\n  _isDataDirty = data => {\n    if (this.state.data) {\n      return (\n        JSON.stringify(this._getOffsets(this.state.data)) !==\n        JSON.stringify(this._getOffsets(data))\n      )\n    } else {\n      return true\n    }\n  }\n\n  _updateStateModifier = {\n    enabled: true,\n    order: 900,\n    fn: data => {\n      if (this._isDataDirty(data)) {\n        this.setState({ data })\n      }\n      return data\n    },\n  }\n\n  _createPopper() {\n    const { placement, eventsEnabled, positionFixed } = this.props\n    const modifiers = {\n      ...this.props.modifiers,\n      applyStyle: { enabled: false },\n      updateState: this._updateStateModifier,\n    }\n    if (this._arrowNode) {\n      modifiers.arrow = {\n        ...(this.props.modifiers.arrow || {}),\n        element: this._arrowNode,\n      }\n    }\n    this._popper = new PopperJS(this._getTargetNode(), this._popperNode, {\n      placement,\n      positionFixed,\n      eventsEnabled,\n      modifiers,\n    })\n\n    // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n    setTimeout(() => this._scheduleUpdate())\n  }\n\n  _destroyPopper() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n  }\n\n  _getPopperStyle = () => {\n    const { data } = this.state\n\n    if (!this._popper || !data) {\n      return {\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n      }\n    }\n\n    return {\n      position: data.offsets.popper.position,\n      ...data.styles,\n    }\n  }\n\n  _getPopperPlacement = () => {\n    return this.state.data ? this.state.data.placement : undefined\n  }\n\n  _getPopperHide = () => {\n    return !!this.state.data && this.state.data.hide ? '' : undefined\n  }\n\n  _getArrowStyle = () => {\n    if (!this.state.data || !this.state.data.offsets.arrow) {\n      return {}\n    } else {\n      const { top, left } = this.state.data.offsets.arrow\n      return { top, left }\n    }\n  }\n\n  _handlePopperRef = node => {\n    this._popperNode = node\n    if (node) {\n      this._createPopper()\n    } else {\n      this._destroyPopper()\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef(node)\n    }\n  }\n\n  _scheduleUpdate = () => {\n    this._popper && this._popper.scheduleUpdate()\n  }\n\n  render() {\n    const {\n      component,\n      innerRef,\n      placement,\n      eventsEnabled,\n      positionFixed,\n      modifiers,\n      children,\n      ...restProps\n    } = this.props\n    const popperStyle = this._getPopperStyle()\n    const popperPlacement = this._getPopperPlacement()\n    const popperHide = this._getPopperHide()\n\n    if (typeof children === 'function') {\n      const popperProps = {\n        ref: this._handlePopperRef,\n        style: popperStyle,\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide,\n      }\n      return children({\n        popperProps,\n        restProps,\n        scheduleUpdate: this._scheduleUpdate,\n      })\n    }\n\n    const componentProps = {\n      ...restProps,\n      style: {\n        ...restProps.style,\n        ...popperStyle,\n      },\n      'data-placement': popperPlacement,\n      'data-x-out-of-boundaries': popperHide,\n    }\n\n    if (typeof component === 'string') {\n      componentProps.ref = this._handlePopperRef\n    } else {\n      componentProps.innerRef = this._handlePopperRef\n    }\n\n    return createElement(component, componentProps, children)\n  }\n}\n\nexport default Popper\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Arrow = (props, context) => {\n  const { component = 'span', innerRef, children, ...restProps } = props\n  const { popper } = context\n  const arrowRef = node => {\n    popper.setArrowNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n  const arrowStyle = popper.getArrowStyle()\n\n  if (typeof children === 'function') {\n    const arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle,\n    }\n    return children({ arrowProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n    style: {\n      ...arrowStyle,\n      ...restProps.style,\n    },\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef\n  } else {\n    componentProps.innerRef = arrowRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nArrow.contextTypes = {\n  popper: PropTypes.object.isRequired,\n}\n\nArrow.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Arrow\n"],"names":["Manager","_setTargetNode","_targetNode","node","_getTargetNode","popperManager","setTargetNode","getTargetNode","props","tag","children","restProps","createElement","Component","childContextTypes","PropTypes","object","isRequired","propTypes","oneOfType","string","bool","func","defaultProps","Target","context","component","innerRef","targetRef","targetProps","ref","componentProps","contextTypes","placements","PopperJS","Popper","state","_setArrowNode","_arrowNode","target","Error","_getOffsets","Object","keys","data","offsets","map","key","_isDataDirty","JSON","stringify","_updateStateModifier","enabled","order","fn","setState","_getPopperStyle","_popper","position","pointerEvents","opacity","popper","styles","_getPopperPlacement","placement","undefined","_getPopperHide","hide","_getArrowStyle","arrow","top","left","_handlePopperRef","_popperNode","_createPopper","_destroyPopper","_scheduleUpdate","scheduleUpdate","setArrowNode","getArrowStyle","lastProps","eventsEnabled","positionFixed","modifiers","applyStyle","updateState","element","setTimeout","destroy","popperStyle","popperPlacement","popperHide","popperProps","style","oneOf","instanceOf","Element","shape","getBoundingClientRect","clientWidth","number","clientHeight","Arrow","arrowRef","arrowStyle","arrowProps"],"mappings":"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"}