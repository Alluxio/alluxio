{"version":3,"file":"react-popper.min.js","sources":["../../src/Manager.js","../../src/Target.js","../../src/Popper.js","../../src/Arrow.js"],"sourcesContent":["import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Manager extends Component {\n  static childContextTypes = {\n    popperManager: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    tag: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  }\n\n  static defaultProps = {\n    tag: 'div',\n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this._setTargetNode,\n        getTargetNode: this._getTargetNode,\n      },\n    }\n  }\n\n  _setTargetNode = node => {\n    this._targetNode = node\n  }\n\n  _getTargetNode = () => {\n    return this._targetNode\n  }\n\n  render() {\n    const { tag, children, ...restProps } = this.props\n    if (tag !== false) {\n      return createElement(tag, restProps, children)\n    } else {\n      return children\n    }\n  }\n}\n\nexport default Manager\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Target = (props, context) => {\n  const { component = 'div', innerRef, children, ...restProps } = props\n  const { popperManager } = context\n  const targetRef = node => {\n    popperManager.setTargetNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n\n  if (typeof children === 'function') {\n    const targetProps = { ref: targetRef }\n    return children({ targetProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef\n  } else {\n    componentProps.innerRef = targetRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nTarget.contextTypes = {\n  popperManager: PropTypes.object.isRequired,\n}\n\nTarget.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Target\n","import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\nimport PopperJS from 'popper.js'\n\nexport const placements = PopperJS.placements\n\nclass Popper extends Component {\n  static contextTypes = {\n    popperManager: PropTypes.object,\n  }\n\n  static childContextTypes = {\n    popper: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    innerRef: PropTypes.func,\n    placement: PropTypes.oneOf(placements),\n    eventsEnabled: PropTypes.bool,\n    positionFixed: PropTypes.bool,\n    modifiers: PropTypes.object,\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    target: PropTypes.oneOfType([\n      // the following check is needed for SSR\n      PropTypes.instanceOf(typeof Element !== 'undefined' ? Element : Object),\n      PropTypes.shape({\n        getBoundingClientRect: PropTypes.func.isRequired,\n        clientWidth: PropTypes.number.isRequired,\n        clientHeight: PropTypes.number.isRequired,\n      }),\n    ]),\n  }\n\n  static defaultProps = {\n    component: 'div',\n    placement: 'bottom',\n    eventsEnabled: true,\n    positionFixed: false,\n    modifiers: {},\n  }\n\n  state = {}\n\n  getChildContext() {\n    return {\n      popper: {\n        setArrowNode: this._setArrowNode,\n        getArrowStyle: this._getArrowStyle,\n      },\n    }\n  }\n\n  componentDidUpdate(lastProps) {\n    if (\n      lastProps.placement !== this.props.placement ||\n      lastProps.eventsEnabled !== this.props.eventsEnabled ||\n      lastProps.target !== this.props.target\n    ) {\n      this._destroyPopper()\n      this._createPopper()\n    }\n    if (lastProps.children !== this.props.children) {\n      this._scheduleUpdate()\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopper()\n  }\n\n  _setArrowNode = node => {\n    this._arrowNode = node\n  }\n\n  _getTargetNode = () => {\n    if (this.props.target) {\n      return this.props.target\n    } else if (\n      !this.context.popperManager ||\n      !this.context.popperManager.getTargetNode()\n    ) {\n      throw new Error(\n        'Target missing. Popper must be given a target from the Popper Manager, or as a prop.',\n      )\n    }\n    return this.context.popperManager.getTargetNode()\n  }\n\n  _getOffsets = data => {\n    return Object.keys(data.offsets).map(key => data.offsets[key])\n  }\n\n  _isDataDirty = data => {\n    if (this.state.data) {\n      return (\n        JSON.stringify(this._getOffsets(this.state.data)) !==\n        JSON.stringify(this._getOffsets(data))\n      )\n    } else {\n      return true\n    }\n  }\n\n  _updateStateModifier = {\n    enabled: true,\n    order: 900,\n    fn: data => {\n      if (this._isDataDirty(data)) {\n        this.setState({ data })\n      }\n      return data\n    },\n  }\n\n  _createPopper() {\n    const { placement, eventsEnabled, positionFixed } = this.props\n    const modifiers = {\n      ...this.props.modifiers,\n      applyStyle: { enabled: false },\n      updateState: this._updateStateModifier,\n    }\n    if (this._arrowNode) {\n      modifiers.arrow = {\n        ...(this.props.modifiers.arrow || {}),\n        element: this._arrowNode,\n      }\n    }\n    this._popper = new PopperJS(this._getTargetNode(), this._popperNode, {\n      placement,\n      positionFixed,\n      eventsEnabled,\n      modifiers,\n    })\n\n    // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n    setTimeout(() => this._scheduleUpdate())\n  }\n\n  _destroyPopper() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n  }\n\n  _getPopperStyle = () => {\n    const { data } = this.state\n\n    if (!this._popper || !data) {\n      return {\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n      }\n    }\n\n    return {\n      position: data.offsets.popper.position,\n      ...data.styles,\n    }\n  }\n\n  _getPopperPlacement = () => {\n    return this.state.data ? this.state.data.placement : undefined\n  }\n\n  _getPopperHide = () => {\n    return !!this.state.data && this.state.data.hide ? '' : undefined\n  }\n\n  _getArrowStyle = () => {\n    if (!this.state.data || !this.state.data.offsets.arrow) {\n      return {}\n    } else {\n      const { top, left } = this.state.data.offsets.arrow\n      return { top, left }\n    }\n  }\n\n  _handlePopperRef = node => {\n    this._popperNode = node\n    if (node) {\n      this._createPopper()\n    } else {\n      this._destroyPopper()\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef(node)\n    }\n  }\n\n  _scheduleUpdate = () => {\n    this._popper && this._popper.scheduleUpdate()\n  }\n\n  render() {\n    const {\n      component,\n      innerRef,\n      placement,\n      eventsEnabled,\n      positionFixed,\n      modifiers,\n      children,\n      ...restProps\n    } = this.props\n    const popperStyle = this._getPopperStyle()\n    const popperPlacement = this._getPopperPlacement()\n    const popperHide = this._getPopperHide()\n\n    if (typeof children === 'function') {\n      const popperProps = {\n        ref: this._handlePopperRef,\n        style: popperStyle,\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide,\n      }\n      return children({\n        popperProps,\n        restProps,\n        scheduleUpdate: this._scheduleUpdate,\n      })\n    }\n\n    const componentProps = {\n      ...restProps,\n      style: {\n        ...restProps.style,\n        ...popperStyle,\n      },\n      'data-placement': popperPlacement,\n      'data-x-out-of-boundaries': popperHide,\n    }\n\n    if (typeof component === 'string') {\n      componentProps.ref = this._handlePopperRef\n    } else {\n      componentProps.innerRef = this._handlePopperRef\n    }\n\n    return createElement(component, componentProps, children)\n  }\n}\n\nexport default Popper\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Arrow = (props, context) => {\n  const { component = 'span', innerRef, children, ...restProps } = props\n  const { popper } = context\n  const arrowRef = node => {\n    popper.setArrowNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n  const arrowStyle = popper.getArrowStyle()\n\n  if (typeof children === 'function') {\n    const arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle,\n    }\n    return children({ arrowProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n    style: {\n      ...arrowStyle,\n      ...restProps.style,\n    },\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef\n  } else {\n    componentProps.innerRef = arrowRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nArrow.contextTypes = {\n  popper: PropTypes.object.isRequired,\n}\n\nArrow.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Arrow\n"],"names":["Manager","_setTargetNode","_targetNode","node","_getTargetNode","_this","props","tag","children","restProps","createElement","Component","childContextTypes","PropTypes","object","isRequired","defaultProps","Target","context","component","innerRef","popperManager","targetRef","setTargetNode","targetProps","ref","componentProps","contextTypes","propTypes","oneOfType","func","placements","PopperJS","Popper","state","_setArrowNode","_arrowNode","target","getTargetNode","Error","_getOffsets","Object","keys","data","offsets","map","key","_isDataDirty","JSON","stringify","_updateStateModifier","setState","_getPopperStyle","_popper","popper","position","styles","_getPopperPlacement","placement","_getPopperHide","hide","_getArrowStyle","arrow","top","left","_handlePopperRef","_popperNode","_createPopper","_destroyPopper","_scheduleUpdate","scheduleUpdate","lastProps","eventsEnabled","positionFixed","modifiers","enabled","_this2","destroy","popperStyle","popperPlacement","popperHide","popperProps","style","Arrow","arrowRef","setArrowNode","arrowStyle","getArrowStyle","arrowProps"],"mappings":"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"}