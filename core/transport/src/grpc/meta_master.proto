syntax = "proto2";

option java_multiple_files = true;
option java_package = "alluxio.grpc";
option java_outer_classname = "MetaMasterProto";

package alluxio.grpc;

message ConfigProperty {
  optional string name = 1;
  optional string source = 2;
  optional string value = 3;
}

message GetConfigurationPOptions{}
message GetConfigurationPResponse{
  repeated ConfigProperty configList = 1;
}

enum MasterInfoField {
  MASTER_ADDRESS = 0;
  RPC_PORT = 1;
  SAFE_MODE = 2;
  START_TIME_MS = 3;
  UP_TIME_MS = 4;
  VERSION = 5;
  WEB_PORT = 6;
  ZOOKEEPER_ADDRESSES = 7;
}

message MasterInfo {
 optional string masterAddress = 1;
 optional int32 rpcPort = 2;
 optional bool safeMode = 3;
 optional int64 startTimeMs = 4;
 optional int64 upTimeMs = 5;
 optional string version = 6;
 optional int32 webPort = 7;
 repeated string zookeeperAddresses = 8;// Null means zookeeper is not enabled
}

message GetMasterInfoPOptions {
  repeated MasterInfoField filter = 1;
}

message GetMasterInfoPResponse {
  optional MasterInfo masterInfo = 1;
}

message GetMetricsPOptions {}
message GetMetricsPResponse {
  map<string, MetricValue> metricsMap = 1;
}

// This type is used as a union, only one of doubleValue or longValue should be set
message MetricValue {
  optional double doubleValue = 1;
  optional int64 longValue = 2;
}

/**
  * This interface contains meta master service endpoints for Alluxio clients.
  */
service MetaMasterClientService {
  /**
   * Returns a list of Alluxio runtime configuration information.
   */
  rpc GetConfiguration(GetConfigurationPOptions) returns (GetConfigurationPResponse);

  /**
   * Returns information about the master.
   */
  rpc GetMasterInfo(GetMasterInfoPOptions) returns (GetMasterInfoPResponse);

  /**
   * Returns a map of metrics property names and their values from Alluxio metrics system.
   */
  rpc GetMetrics(GetMetricsPOptions) returns (GetMetricsPResponse);
}
